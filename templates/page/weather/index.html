{% extends 'layout.html' %}
{% load static %}

{% block title %}Weather{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/weather.css' %}?v={{ timestamp }}">
{% endblock %}

{% block content %}
<div class="weather-wrapper">
    <!-- Cá»™t trÃ¡i: cÃ¡c ngÃ y -->
    <div class="day-tabs">
        {% for day in forecast %}
        <button class="tab-btn {% if forloop.first %}active{% endif %}" data-day="{{ forloop.counter0 }}">
            {{ day.date }}
        </button>
        {% endfor %}
    </div>

    <!-- Cá»™t pháº£i: Chart + Box chi tiáº¿t -->
    <div class="forecast-right">
        {% for day in forecast %}
        <div class="forecast-display {% if forloop.first %}active{% endif %}" id="day-panel-{{ forloop.counter0 }}">
        <!-- Biá»ƒu Ä‘á»“ -->
        <div class="chart-image-container">
            <!-- 2 áº£nh sáºµn sÃ ng, CSS sáº½ chá»‰ hiá»‡n áº£nh Ä‘Ãºng theme -->
            <img class="chart-img chart-img--light"
                src="{{ day.chart_image_light }}"
                alt="Weather Chart (Light) {{ day.date }}"
                loading="lazy" decoding="async" />
            <img class="chart-img chart-img--dark"
                src="{{ day.chart_image_dark }}"
                alt="Weather Chart (Dark) {{ day.date }}"
                loading="lazy" decoding="async" />
        </div>

        <!-- detail-box cá»§a NGÃ€Y NÃ€Y -->
        <div class="detail-box">
            <button class="scroll-btn-left"  data-day="{{ forloop.counter0 }}" data-direction="-2" id="scroll-left-{{ forloop.counter0 }}">â€¹</button>
            <div class="detail-box-container" id="hourly-container-{{ forloop.counter0 }}">
            {% for period in day.periods %}
            <div class="forecast-period"
                data-hour="{{ period.hour }}"
                data-date="{{ day.date_iso }}"
                data-time="{{ period.time }}">
                <p class="period-time">{{ period.time }}</p>
                <img src="{{ period.icon }}" alt="{{ period.condition }}">
                <p class="period-temp">{{ period.temp_c }}Â°</p>
                <p class="period-condition">{{ period.condition }}</p>
                <p class="period-humidity">ðŸ’§ {{ period.humidity }}%</p>
            </div>
            {% endfor %}
            </div>
            <button class="scroll-btn-right" data-day="{{ forloop.counter0 }}" data-direction="2" id="scroll-right-{{ forloop.counter0 }}">â€º</button>
        </div>
        </div>
        {% endfor %}

    </div>
</div>

<script src="{% static 'js/weather_index.js' %}"></script>
{% endblock %}